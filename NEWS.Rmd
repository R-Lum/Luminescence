---
output:
  md_document:
    variant: gfm # github flavored markdown
header-includes:
   - \usepackage{amsmath}
   - \usepackage{amssymb}
---
<!-- NEWS.md was auto-generated by NEWS.Rmd. Please DO NOT edit by hand!-->

# Changes in version `r RLumBuild::.get_pkg_version()` (`r Sys.Date()`)

## New functions

## Breaking changes

* Function `get_Quote()` is no longer exported, but remains available as an
internal function. This is unlikely to affect any user of the package, as the
function was only meant to report a random quote at startup (#644).

## Renamed functions and deprecations

## Bugfixes

### `analyse_FadingMeasurement()` 
* The function crashed if the number of `Lx` and `Tx` curves was not equal
when `structure = c("Lx", "Tx")`, which is the default. The check that the
number of points within each pair of curves has also been improved, and the
function now produces more helpful error messages (#616).

### `calc_AliquotSize()`

* The function computed incorrectly the area of the container when computing
the packing density in the case when argument `grains.counted` was provided,
which resulted in smaller packing density (#621).

* The new argument `sample_carrier.diameter` allows to specify a value for
the diameter of the sample carrier, which up to now was hardcoded to the very
common 9.8 mm size (#623).

### `calc_OSLLxTxRatio()`
* The function returned a warning for wrong integral settings for the `Tx` curve even if no `Tx` curve was provided; fixed. 
* The function does not check any more of different object types for `Lx.data` and `Tx.data` but validate objects for allowed types (this should have no user-visible effects)

### `calc_Huntely2006()`

* Add support for nls-fitting control arguments `maxiter` and `trace`.

### `convert_Concentration2DoseRate()`

* The function validates its input values more thoroughly (#613).

### `fit_DoseResponseCurve()`

* The function now allocates less memory for storing intermediate values
(#610).

### `import_Data()`

* The function uses the most common formats (BINX and XSYG) before trying
all others.

### `merge_RLum.Data.Curve()`

* The function does no longer stops for differing channel resolutions, 
but it does issue a warning. The user is responsible for the consequences.

### `plot_KDE()`

* The function validates its input values more thoroughly (#635).

* Setting `summary.pos` to one of "left", "center" or "right" resulted in
the summary table not being visible (#642).

### `plot_RadialPlot()`

* The function validates its input values more thoroughly (#639).

### `plot_RLum.Data.Curve()`

* We added comprehensive support for base R plotting arguments utilised by `plot.default()` and `par()`. 
This enhancement ensures that all available arguments are fully supported (#646).

* The function gained a new logical argument named `auto_scale`. When set in conjunction with either `xlim` or `ylim`, this argument automatically adjusts the plot range to align with the corresponding settings for `xlim` or `ylim`. For instance, if a user intends to plot OSL curves but initially selects the `xlim` range `c(10:30)` to examine the background, the initial count values may be excessively large, resulting in limited visibility. With the introduction of the `auto_scale` option, the `ylim` values are automatically adjusted to compensate for this scenario. The `auto_scale` argument is also accessible through `plot_RLum.Analysis()` and `plot_RLum()` (#646).


### `sort_RLum()`
* The sorting mechanism for `RLum.Analysis-class` objects has been enhanced. 
It now enables sorting based on multiple parameters, including sorting all 
available `info_elements` in a prioritised manner (#606, #620).
* Sorting now works on a list of `RLum.Analysis-class` objects. If the list contains other elements, 
they are passed through. The output is again a list (#620) 

### `structure_RLum()`

* The function now returns a less messy data frame because it encapsulates
`.pid` and `info` as lists within the data frame. The function is primarily
used internally to facilitate a rapid exploration of `RLum.Analysis-class`
object structures. However, the change may potentially break existing code in
extremely rare circumstances.

## Internals

* The internal function `create_UID()` has undergone further optimisation for speed, 
resulting in a significant performance improvement. Additionally, it now generates 
a hash value with a consistent length instead of a time stamp with a random number.
