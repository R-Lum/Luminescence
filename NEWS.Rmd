---
output:
  md_document:
    variant: gfm # github flavored markdown
header-includes:
   - \usepackage{amsmath}
   - \usepackage{amssymb}
---
<!-- NEWS.md was auto-generated by NEWS.Rmd. Please DO NOT edit by hand!-->

# Changes in version `r RLumBuild::.get_pkg_version()` (`r Sys.Date()`)

## New functions

## New datasets

## Removed functions and deprecations

* Functions `calc_Kars2008()` (defunct since 0.9.26), `Analyse_SAR.OSLdata()`
(since 1.0.0), `PSL2Risoe.BINfileData()` (since 1.0.0) and `Second2Gray()`
(since 1.0.0) have been removed from the package. Their functionality can be
found in functions `calc_Huntley2006()`, `analyse_SAR.CWOSL()`,
`convert_PSL2Risoe.BINfileData()` and `convert_Second2Gray()`, respectively.

## Breaking changes

## Bugfixes and changes

### `apply_CosmicRayRemoval()`

* The argument `method` for `method = "smooth_RLum()"` was not reachable and
would lead to a crash if called. Now the `<...>` argument is called
`method_smooth_RLum` and works as expected. 

### `analyse_SAR.CWOSL()`

* The function crashed if any of the curves had `NA` as its `recordType`
(#867).

### `calc_AliquotSize()`

* The legend text now scales better at non-default cex settings (#849).

### `calc_Huntley2006()`

* If the user set the `n.MC` argument, this was also used in the fitting of
the dose response curve. This was not the expected behaviour, and resulted
in poor performance (a 2x slowdown for `n.MC = 10000`). This regression was
introduced in version 1.0.0 (#867).

### `get_RLum()`

* The function doesn't crash anymore on `RLum.Analysis` objects if
`record.id` removes all available records (#873).

* An internal optimization increased the performance of the function. The
difference is not perceivable on single calls to `get_RLum()`, but the change
brings a visible speed up when `merge_RLum()` is called over a sufficiently
large number of `RLum.Analysis` objects (#875).

### `plot_AbanicoPlot()`

* The positioning of the y-axis label has been improved to be centred around
the zero line (#847). The z-axis tickmarks and labels are better drawn at
non-default cex values (#865).

* The minor grid lines were drawn incorrectly in a rotated plot (#849).

* Some plot elements didn't scale correctly at non-default cex values (#861,
#879).

* The `frame` argument is now respected also when the plot is rotated (#863).

### `plot_DRTResults()`

* Points didn't scale correctly at non-default `cex` values (#879).

### `plot_KDE()`

* Outlier points didn't scale correctly at non-default `cex` values (#879).

### `plot_RLum.Analysis()`

* The legend text now scales better at non-default `cex` settings (#854).

### `plot_RLum.Data.Curve()`

* The function gained a new logical argument `interactive` that enables interactive
plotting of curves using `plotly::plot_ly()`. It requires the suggested package 
`'plotly'` to be present (#e4746ea).

### `plot_RLum.Data.Spectrum()`

* Types `image` and `contour` gained more control of the contour line labels through the argument `labcex`.

* For plot types `"image"` and `"multiple.lines"` the `...` argument `legend` (`TRUE` \ `FALSE`) was added.

* Plot type `"image"` further gained a legend with support through `...` for `legend.pos`, `legend.horiz` and `n_breaks` to
control the number of colours in the graphic.

### `plot_DoseResponseCurve()`

* We added support for the `log` graphical parameter, which can be used if
the fit was obtained with mode other than `"extrapolation"` (#820).

* The normal curve drawn as part of the histogram plot could appear very
jagged or even as a straight line, as it could happen that too few points
were actually used when drawing the curve (#843).

## `trim_RLum.Data()`

* The function crashed if both values specified in the `trim_range` argument
  exceeded the number of channels available (#871).
