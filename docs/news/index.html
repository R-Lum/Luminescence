<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Changelog • Luminescence</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-news">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Luminescence</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.24</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="../reference/index.html">References</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
<li>
  <a href="https://github.com/R-Lum/Luminescence" class="external-link">
    <span class="fa fa-github"></span>
     
    GitHub
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1 data-toc-skip>Changelog <small></small></h1>
      <small>Source: <a href="https://github.com/R-Lum/Luminescence/blob/HEAD/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="page-header" data-toc-text="0.9.24" id="changes-in-version-0924-2024-06-07">Changes in version 0.9.24 (2024-06-07)<a class="anchor" aria-label="anchor" href="#changes-in-version-0924-2024-06-07"></a></h2>
<p><strong>This package version requires R &gt;= 4.3</strong></p>
<div class="section level3">
<h3 id="new-functions-0-9-24">New functions<a class="anchor" aria-label="anchor" href="#new-functions-0-9-24"></a></h3>
<ul><li><p><code><a href="../reference/trim_RLum.Data.html">trim_RLum.Data()</a></code>: This new function enables trimming off the number of channels of all supported <code>RLum.Data-class</code> on the time domain. For instance, an OSL curve (<code>RLum.Data.Curve-class</code>) has 1000 channels; one may want to extract only channels 10 to 100. Moreover, sometimes, <code>RLum.Data-class</code> objects have a different number of channels but are otherwise measured with the exact time resolution. Until now, it was possible to merge those curves, but the subsequent analysis usually failed because most of the analysis functions check whether the number of channels matches.</p></li>
<li><p><code><a href="../reference/import_Data.html">import_Data()</a></code>: A convenience wrapper around all functions commencing with <code>read_</code>. The functions steps through all functions and the one that can import a file is chosen. This function simplifies writing of scripts for different data formats.</p></li>
</ul></div>
<div class="section level3">
<h3 id="the-thermochronometry-functions-internal-0-9-24">The Thermochronometry functions (internal)<a class="anchor" aria-label="anchor" href="#the-thermochronometry-functions-internal-0-9-24"></a></h3>
<ul><li>Add internal function to import thermochronometry XLSX sheets into R; an R implementation of <code>STAGE1, ExcelToStructure</code>; the function has no user visible use for the moment.</li>
</ul></div>
<div class="section level3">
<h3 id="bugfixes-and-changes-0-9-24">Bugfixes and changes<a class="anchor" aria-label="anchor" href="#bugfixes-and-changes-0-9-24"></a></h3>
<div class="section level4">
<h4 id="analyse_irsarrf-0-9-24"><code>analyse_IRSARRF()</code><a class="anchor" aria-label="anchor" href="#analyse_irsarrf-0-9-24"></a></h4>
<ul><li>The function crashed for <code>RF_nat.lim</code> settings with two parameters; fixed (thanks to Mariana Sontag-Gonzalez for reporting)</li>
<li>The function gained a new argument option for <code>method</code>: <code>"VSLIDE"</code>. If set, the vertical sliding with the range set to <code>"auto"</code> is used for the estimation of the equivalent dose.</li>
</ul></div>
<div class="section level4">
<h4 id="analyse_sarcwosl-0-9-24"><code>analyse_SAR.CWOSL()</code><a class="anchor" aria-label="anchor" href="#analyse_sarcwosl-0-9-24"></a></h4>
<ul><li>The function gained a new argument <code>trim_channels</code>. The default is <code>FALSE</code> to do not break existing code. If <code>TRUE</code> OSL and IRSL are curves are checked for the lowest number of channels on the curves and then all curves are trimmed accordingly using <code><a href="../reference/trim_RLum.Data.html">trim_RLum.Data()</a></code>. This should fix an issue where data could not be analysed due to different channel numbers erroneously produced by the luminescence readers.</li>
<li>The dose points names are returned as <code>factors</code> (which they are) instead of <code>characters</code>, with their class in the correct order. If you expect character values this may break existing code.</li>
<li>The <code>$data</code> element gained two new columns <code>ALQ</code> and <code>POS</code> where the functions tries to store data about the running aliquot number and the position of the aliquot in the reader. The latter can only be accessed if this information was provided in measurement data (e.g., XSYG or BIN/BINX)</li>
<li>The argument <code>rejection.criteria</code> gained a new option <code>recuperation_reference</code> preset to <code>"Natural"</code> to specify the regeneration reference dose point taken into account for calculating the recuperation rate (suggested by Anna-Maartje Boer and Jakob Wallinga)</li>
</ul></div>
<div class="section level4">
<h4 id="calc_huntely2006-0-9-24"><code>calc_Huntely2006()</code><a class="anchor" aria-label="anchor" href="#calc_huntely2006-0-9-24"></a></h4>
<ul><li>If the age is <code>NA</code> due to <code>Ln/Tn</code> values lower than the smallest simulated <code>Lx/Tx</code> value, a warning with an explanation is returned. Thanks to Christina Neudorf for providing the test dataset.</li>
<li>Better catch a few uncontrolled errors and improve the success of the fitting (thanks to Salome Oehler for providing scripts and datasets)</li>
<li>Regression: The changes in the last version led to unexpected function behaviour in cases where users tried the fading correction with only a few dose points in the lower part of the dose-response curve because the fits were no longer forced through the origin. This issue is now corrected, and the user can use the argument <code>fit.force_through_origin</code> (which is passed down to <code><a href="../reference/plot_GrowthCurve.html">plot_GrowthCurve()</a></code>) to force the fit again through the origin (thanks to Junjie Zhang for reporting the issue).</li>
</ul></div>
<div class="section level4">
<h4 id="convert_activity2concentration-0-9-24"><code>convert_Activity2Concentration()</code><a class="anchor" aria-label="anchor" href="#convert_activity2concentration-0-9-24"></a></h4>
<ul><li>The function did not work as expected if input was provided as abundance and the output data frame was missing values; fixed.</li>
<li>The parameter <code>input_unit</code> now expects either <code>"activity"</code> (the default) or <code>"abundance"</code> instead of <code>"Bq/kg"</code> or <code>"ppm/%'</code>. The old input parameters are still silently accepted.</li>
<li>
<strong>Potentially breaking change</strong>: The naming of the output data frame now reports SI unit conform values, i.e. we <code>ppm</code> is no longer acceptable because it might have different interpretations. To reflect this change, in the function title we replaced “concentration” with “abundance”.</li>
</ul></div>
<div class="section level4">
<h4 id="read_bin2r-0-9-24"><code>read_BIN2R()</code><a class="anchor" aria-label="anchor" href="#read_bin2r-0-9-24"></a></h4>
<ul><li>Argument <code>n.records</code> can now be provided as a vector to specifically select records for the import. All other records are skipped and not imported. This can be useful in particular for very large BIN/BINX-files because allows importing single records very quickly without parsing the entire file</li>
<li>The function is now less talkative for zero byte records and stopped spamming the console.</li>
<li>The function learned about <code>RECTYPE</code> 128 records and can now import them (before those records were skipped). As it is in the original format, these information are only appended to the BIN/BINX file, means they do not really represent measurement data. <em>Please note that this support is highly experimental!</em><br></li>
<li>The download of files now uses the new internal function <code>.download_file()</code>
</li>
</ul></div>
<div class="section level4">
<h4 id="read_daybreak2r-0-9-24"><code>read_Daybreak2R()</code><a class="anchor" aria-label="anchor" href="#read_daybreak2r-0-9-24"></a></h4>
<ul><li>The function gained the <code>...</code> argument for compatibility reasons</li>
</ul></div>
<div class="section level4">
<h4 id="read_rf2r-0-9-24"><code>read_RF2R()</code><a class="anchor" aria-label="anchor" href="#read_rf2r-0-9-24"></a></h4>
<ul><li>The function gained the <code>...</code> argument for compatibility reasons</li>
</ul></div>
<div class="section level4">
<h4 id="read_spe2r-0-9-24"><code>read_SPE2R()</code><a class="anchor" aria-label="anchor" href="#read_spe2r-0-9-24"></a></h4>
<ul><li>The function gained the <code>...</code> argument for compatibility reasons</li>
<li>The argument verbose was not fully respected; fixed</li>
</ul></div>
<div class="section level4">
<h4 id="read_tiff2r-0-9-24"><code>read_TIFF2R()</code><a class="anchor" aria-label="anchor" href="#read_tiff2r-0-9-24"></a></h4>
<ul><li>The function gained the <code>...</code> argument for compatibility reasons</li>
</ul></div>
<div class="section level4">
<h4 id="read_xsyg2r-0-9-24"><code>read_XSYG2R()</code><a class="anchor" aria-label="anchor" href="#read_xsyg2r-0-9-24"></a></h4>
<ul><li>Tries a little bit harder to determine the correct file path.</li>
<li>Returns the file path as <code>@info</code> object in the <code>RLum.Analysis-class</code> output.</li>
<li>If the file is not readable it only shows the R error and not anymore the internal error.</li>
</ul></div>
<div class="section level4">
<h4 id="plot_detplot-0-9-24"><code>plot_DetPlot()</code><a class="anchor" aria-label="anchor" href="#plot_detplot-0-9-24"></a></h4>
<ul><li>New argument <code>plot</code>: The function gained the new parameter <code>plot</code> to provide the possibility to disable the plot output for more complex operations</li>
<li>Additional input: The function now understands lists of <code>RLum.Analysis-class</code> objects and iterates over those objects automatically.</li>
<li>New argument <code>multicore</code>: As an addition to the list operation, the function can let it run in a multi core session</li>
<li>The legend displayed the wrong labels for the equivalent dose and the <code>Ln/Tn</code> values; fixed.</li>
<li>The legend is now disabled by default if no shine-down curve is shown; it can be activated again manually using <code>legend</code>.</li>
<li>The par settings were not correctly reset; fixed.</li>
<li>The function now supports the <code>trim_channel</code> argument from <code><a href="../reference/analyse_SAR.CWOSL.html">analyse_SAR.CWOSL()</a></code>
</li>
</ul></div>
<div class="section level4">
<h4 id="plot_growthcurve-0-9-24"><code>plot_GrowthCurve()</code><a class="anchor" aria-label="anchor" href="#plot_growthcurve-0-9-24"></a></h4>
<ul><li>Edge case: If the <code>Ln/Tn</code> values was way below the fit and <code>fit.method = EXP</code> was chosen for the fitting, the function still returned a positive equivalent dose for <code>mode = interpolation</code>. Now the returned value is <code>NA</code> since no interpolation was possible.</li>
<li>Minor graphical polish: the dashed lines are drawn to the end of the plot area.</li>
</ul></div>
<div class="section level4">
<h4 id="plot_rlum-0-9-24"><code>plot_RLum()</code><a class="anchor" aria-label="anchor" href="#plot_rlum-0-9-24"></a></h4>
<ul><li>The function knows how to process results produces by <code><a href="../reference/analyse_SAR.CWOSL.html">analyse_SAR.CWOSL()</a></code>, <code><a href="../reference/analyse_pIRIRSequence.html">analyse_pIRIRSequence()</a></code> and <code>analyse_IRSARRF()</code>; the functionality is very basic and for fast reporting situations only.</li>
</ul></div>
<div class="section level4">
<h4 id="report_rlum-0-9-24"><code>report_RLum()</code><a class="anchor" aria-label="anchor" href="#report_rlum-0-9-24"></a></h4>
<ul><li>The file <code>*.Rds</code> file path download did not function anymore; fixed.</li>
<li>The function threw an non-conclusive warning; fixed.</li>
</ul></div>
<div class="section level4">
<h4 id="risoebinfiledata-class-0-9-24"><code>Risoe.BINfileData-class()</code><a class="anchor" aria-label="anchor" href="#risoebinfiledata-class-0-9-24"></a></h4>
<ul><li>The <code>show</code> method now knows about <code>RECTYPE</code> 128 and will account for it.</li>
</ul></div>
<div class="section level4">
<h4 id="risoebinffiledata2rlumanalysis-0-9-24"><code>Risoe.BINFfileData2RLum.Analysis()</code><a class="anchor" aria-label="anchor" href="#risoebinffiledata2rlumanalysis-0-9-24"></a></h4>
<ul><li>The function learned about <code>RECTYPE</code> 128 records. Those records contain ROI data from camera measurements and are skipped for the moment because they do not really belong to measurement data. This may change future.</li>
</ul></div>
</div>
<div class="section level3">
<h3 id="internals-0-9-24">Internals<a class="anchor" aria-label="anchor" href="#internals-0-9-24"></a></h3>
<ul><li>Add internal download helper <code>.download_file()</code> for a more consistent approach to detect URL schemes and download files across the package</li>
<li>Cover tricky edge case for the internal function <code>.expand_parameters()</code>. The function is used to recycle and expand function parameters if the input is a list object. It apparently showed odd behaviour if a function was used in a loop with objects of its own, e.g., <code>f(x = i + 1)</code>, then the function would recycle <code>i + 1</code> and then evaluate <code>i + 1</code> in the function environment. Usually, this should throw an error, but in particular, <code>i</code> is an object name commonly used in loops, so the function went upwards in the environments until it found the first <code>i</code>. However, this is not the <code>i</code> inserted by the user. The result was that the loop did not seem to work for no apparent reason. Now, <code>.expand_parameters()</code> evaluates input in the parent environment before passing it down.</li>
</ul></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Sebastian Kreutzer, Christoph Burow, Michael Dietze, Margret C. Fuchs, Christoph Schmidt, Manfred Fischer, Johannes Friedrich, Norbert Mercier, Anne Philippe, Svenja Riedesel, Martin Autzen, Dirk Mittelstrass, Harrison J. Gray, Jean-Michel Galharret.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

