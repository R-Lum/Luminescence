




<!-- NEWS.md was auto-generated by NEWS.Rmd. Please DO NOT edit by hand!-->

# Changes in version 0.9.25.9000-8 (2024-09-18)

## New functions

## Bugfixes

### `analyse_pIRIRSequence()`

- The function crashed with a object merge error if run in a loop
  because of a `merge_RLum()` error. This was caused by a regression
  while implementing the `n_N` calculation in `plot_GrowthCurve()`.
  Potentially affected was also `analyse_SAR.CWOSL()`.
- The functions tries to be more soft on the user when plot output on a
  too small device is attempted. Now it shows a warning with
  instructions and set `plot = FALSE`. This should prevent “Figure
  margins too large” errors.
- The function will not crash anymore during the plotting in another
  edge case related to single grain data.

### `get_RLum()`

- When the function was used on a list of `RLum.Analysis-class` objects
  with the argument `null.rm = TRUE` it would remove all `NULL` objects,
  but not elements that became `list()` (empty list) during the
  selection; fixed.

### `plot_RLum.Data.Spectrum()`

- Add support for `lphi` and `ltheta` light direction arguments for
  `plot.type = "persp"`.
- Fix the reason for the unclear warning
  `In col.unique == col :  longer object length is not a multiple of shorter object length`

### `write_R2BIN()`

- Recently, non-ASCII characters in comments or file names became more
  common and that led to crashes during the file export. To avoid this
  now all non-ASCII characters are replaced by `_` before writing them
  to the BIN/BINX files.
- The function now returns the file path of the export.
- Fix a bug that left connections open if the function crashed.

## Internals

- Two new internal functions `.throw_warning()` and `.throw_error()`
  sometimes flushed the terminal with messages if call (internally) in
  particular circumstances. Now the functions make only two attempts to
  get the name of their called and then return an `unknown()` as
  function name.

## Internals
