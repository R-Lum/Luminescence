




<!-- NEWS.md was auto-generated by NEWS.Rmd. Please DO NOT edit by hand!-->

# Changes in version 0.9.24.9000-37 (2024-03-16)

**This package version requires R \>= 4.2**

## New functions

- `trim_RLum.Data()`: This new function enables to trim off the number
  of channels of all supported `RLum.Data-class` on the time domain. For
  instance, an OSL curve (`RLum.Data.Curve-class`) has 1000 channels,
  one may want to extract only channels 10 to 100. Moreover, sometimes,
  `RLum.Data-class` objects have a different number of channels but are
  otherwise measured with the same time resolution. Until now, it was
  possible to merge those curves, but the subsequent analysis usually
  failed because most of the analysis functions check whether the number
  of channels matches.

## Bugfixes and changes

### `analyse_IRSARRF()`

- The function crashed for `RF_nat.lim` settings with two parameters;
  fixed (thanks to Mariana Sontag-Gonzalez for reporting)
- The function gained a new argument option for `method`: `"VSLIDE"`. If
  set, the vertical sliding with the range set to `"auto"` is used for
  the estimation of the equivalent dose.

### `analyse_SAR.CWOSL()`

- The function gained a new argument `trim_channels`. The default is
  `FALSE` to do not break existing code. If `TRUE` OSL and IRSL are
  curves are checked for the lowest number of channels on the curves and
  then all curves are trimmed accordingly using `trim_RLum.Data()`. This
  should fix an issue where data could not be analysed due to different
  channel numbers erroneously produced by the luminescence readers.
- The dose points names are returned as `factors` (which they are)
  instead of `characters`, with their class in the correct order. If you
  expect character values this may break existing code.

### `calc_Huntely2006()`

- If the age is `NA` due to `Ln/Tn` values lower than the smallest
  simulated `Lx/Tx` value, a warning with an explanation is returned.
  Thanks to Christina Neudorf for providing the test dataset.
- Better catch a few uncontrolled errors and improve the success of the
  fitting (thanks to Salome Oehler for providing scripts and datasets)

### `read_BIN2R()`

- Argument `n.records` can now be provided as a vector to specifically
  select records for the import. All other records are skipped and not
  imported. This can be useful in particular for very large
  BIN/BINX-files because allows importing single records very quickly
  without parsing the entire file
- The function learned about `RECTYPE` 128 records and can now import
  them (before those records were skipped). As it is in the original
  format, these information are only appended to the BIN/BINX file,
  means they do not really represent measurement data.

### `plot_GrowthCurve()`

- Edge case: If the `Ln/Tn` values was way below the fit and
  `fit.method = EXP` was chosen for the fitting, the function still
  returned a positive equivalent dose for `mode = interpolation`. Now
  the returned value is `NA` since no interpolation was possible.

### `plot_RLum()`

- The function knows how to process results produces by
  `analyse_SAR.CWOSL()`, `analyse_pIRIRSequence()` and
  `analyse_IRSARRF()`; the functionality is very basic and for fast
  reporting situations only.

### `report_RLum()`

- The file `*.Rds` file path download did not function anymore; fixed.
- The function threw an non-conclusive warning; fixed.

### `Risoe.BINfileData-class()`

- The `show` method now knows about `RECTYPE` 128 and will account for
  it.

### `Risoe.BINFfileData2RLum.Analysis()`

- The function learned about `RECTYPE` 128 records. Those records
  contain ROI data from camera measurements and are skipped for the
  moment because they do not really belong to measurement data. This may
  change future.
