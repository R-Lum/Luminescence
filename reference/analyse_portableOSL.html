<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Analyse portable CW-OSL measurements — analyse_portableOSL • Luminescence</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Analyse portable CW-OSL measurements — analyse_portableOSL"><meta name="description" content="The function analyses CW-OSL curve data produced by a SUERC portable OSL reader and
produces a combined plot of OSL/IRSL signal intensities, OSL/IRSL depletion ratios
and the IRSL/OSL ratio."><meta property="og:description" content="The function analyses CW-OSL curve data produced by a SUERC portable OSL reader and
produces a combined plot of OSL/IRSL signal intensities, OSL/IRSL depletion ratios
and the IRSL/OSL ratio."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Luminescence</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span> Home</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">References</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="../news/index.html"><span class="fa fa-newspaper-o"></span> News</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/R-Lum/Luminescence"><span class="fa fa-github"></span> GitHub</a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Analyse portable CW-OSL measurements</h1>
      <small class="dont-index">Source: <a href="https://github.com/R-Lum/Luminescence/blob/master/R/analyse_portableOSL.R" class="external-link"><code>R/analyse_portableOSL.R</code></a></small>
      <div class="d-none name"><code>analyse_portableOSL.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The function analyses CW-OSL curve data produced by a SUERC portable OSL reader and
produces a combined plot of OSL/IRSL signal intensities, OSL/IRSL depletion ratios
and the IRSL/OSL ratio.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">analyse_portableOSL</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  signal.integral <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  invert <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  normalise <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  mode <span class="op">=</span> <span class="st">"profile"</span>,</span>
<span>  coord <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p><a href="RLum.Analysis-class.html">RLum.Analysis</a> (<strong>required</strong>): <a href="RLum.Analysis-class.html">RLum.Analysis</a> object produced by <a href="read_PSL2R.html">read_PSL2R</a>.
The input can be a <a href="https://rdrr.io/r/base/list.html" class="external-link">list</a> of such objects, in such case each input is treated as a separate sample
and the results are merged.</p></dd>


<dt id="arg-signal-integral">signal.integral<a class="anchor" aria-label="anchor" href="#arg-signal-integral"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a> (<strong>required</strong>): A vector of two values specifying the lower and upper channel used to calculate the OSL/IRSL signal. Can be provided in form of <code>c(1, 5)</code> or <code>1:5</code>.</p></dd>


<dt id="arg-invert">invert<a class="anchor" aria-label="anchor" href="#arg-invert"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a> (<em>with default</em>): <code>TRUE</code> flip the plot the data in reverse order.</p></dd>


<dt id="arg-normalise">normalise<a class="anchor" aria-label="anchor" href="#arg-normalise"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a> (<em>with default</em>): <code>TRUE</code> to normalise the OSL/IRSL signals
to the <em>mean</em> of all corresponding data curves.</p></dd>


<dt id="arg-mode">mode<a class="anchor" aria-label="anchor" href="#arg-mode"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a> (<em>with default</em>): defines the analysis mode, allowed
are <code>"profile"</code> (the default) and <code>"surface"</code> for surface interpolation. If you select
something else, nothing will be plotted (similar to <code>plot = FALSE</code>).</p></dd>


<dt id="arg-coord">coord<a class="anchor" aria-label="anchor" href="#arg-coord"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a> <a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a> (<em>optional</em>): a list or matrix of the same length as
number of samples measured with coordinates for the sampling positions. Coordinates
are expected to be provided in meter (unit: m).
Expected are x and y coordinates, e.g.,
<code>coord = list(samp1 = c(0.1, 0.2)</code>. If you have not measured x coordinates, please x should be 0.</p></dd>


<dt id="arg-plot">plot<a class="anchor" aria-label="anchor" href="#arg-plot"></a></dt>
<dd><p><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a> (<em>with default</em>): enable/disable the plot output.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>other parameters to be passed to modify the plot output.
Supported are <code>run</code> to provide the run name ,
if the input is a <code>list</code>, this is set automatically. Further plot parameters are
<code>surface_values</code> (<a href="https://rdrr.io/r/base/character.html" class="external-link">character</a> with value to plot), <code>legend</code> (<code>TRUE</code>/<code>FALSE</code>), <code>col_ramp</code> (for
surface mode), <code>contour</code> (contour lines <code>TRUE</code>/<code>FALSE</code> in surface mode), <code>grid</code> (<code>TRUE</code>/<code>FALSE</code>), <code>col</code>, <code>pch</code> (for profile mode), <code>xlim</code> (a name <a href="https://rdrr.io/r/base/list.html" class="external-link">list</a> for profile mode), <code>ylim</code>,
<code>zlim</code> (surface mode only), <code>ylab</code>, <code>xlab</code>, <code>zlab</code> (here x-axis labelling), <code>main</code>, <code>bg_img</code> (for
profile mode background image, usually a profile photo; should be a raster object),
<code>bg_img_positions</code> (a vector with the four corner positions, cf. <a href="https://rdrr.io/r/graphics/rasterImage.html" class="external-link">graphics::rasterImage</a>)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns an S4 <a href="RLum.Results-class.html">RLum.Results</a> object with the following elements:</p>
<p><code>$data</code><br><code>.. $summary</code>: <a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a> with the results<br><code>.. $data</code>: <a href="https://rdrr.io/r/base/list.html" class="external-link">list</a> with the <a href="RLum.Analysis-class.html">RLum.Analysis</a> objects<br><code>.. $args</code>: <a href="https://rdrr.io/r/base/list.html" class="external-link">list</a> the input arguments</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function only works with <a href="RLum.Analysis-class.html">RLum.Analysis</a> objects produced by <a href="read_PSL2R.html">read_PSL2R</a>.
It further assumes (or rather requires) an equal amount of OSL and IRSL curves that
are pairwise combined for calculating the IRSL/OSL ratio. For calculating the depletion ratios
the cumulative signal of the last n channels (same number of channels as specified
by <code>signal.integral</code>) is divided by cumulative signal of the first n channels (<code>signal.integral</code>).</p>
<p><strong>Note:  The function assumes the following sequence pattern: <code>DARK COUNT</code>, <code>IRSL</code>, <code>DARK COUNT</code>, <code>BSL</code>, <code>DARK COUNT</code>. If you have written a different sequence, the analysis function will (likely) not work!</strong>.</p>
<p><strong>Signal processing</strong>
The function processes the signals as follows: <code>BSL</code> and <code>IRSL</code> signals are extracted using the
chosen signal integral, dark counts are taken in full.</p>
<p><strong>Working with coordinates</strong>
Usually samples are taken from a profile with a certain stratigraphy. In the past the function
calculated an index. With this newer version, you have two option of passing on xy-coordinates
to the function:</p><ul><li><p>(1) Add coordinates to the sample name during measurement. The form is rather
strict and has to follow the scheme <code>_x:&lt;number&gt;|y:&lt;number&gt;</code>. Example:
<code>sample_x:0.2|y:0.4</code>.</p></li>
<li><p>(2) Alternatively, you can provide a <a href="https://rdrr.io/r/base/list.html" class="external-link">list</a> or <a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a> with the sample coordinates.
Example: <code>coord = list(c(0.2, 1), c(0.3,1.2))</code></p></li>
</ul><p>Please note that the unit is meter (m) and the function expects always xy-coordinates.
The latter one is useful for surface interpolations. If you have measured a profile where
the x-coordinates to not measure, x-coordinates should be 0.</p>
    </div>
    <div class="section level2">
    <h2 id="function-version">Function version<a class="anchor" aria-label="anchor" href="#function-version"></a></h2>
    <p>0.1.1</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="RLum.Analysis-class.html">RLum.Analysis</a>, <a href="RLum.Data.Curve-class.html">RLum.Data.Curve</a>, <a href="read_PSL2R.html">read_PSL2R</a></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Christoph Burow, University of Cologne (Germany), Sebastian Kreutzer,
Institute of Geography, Ruprecht-Karl University of Heidelberg, Germany</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## example profile plot</span></span></span>
<span class="r-in"><span><span class="co"># (1) load example data set</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"ExampleData.portableOSL"</span>, envir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/environment.html" class="external-link">environment</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># (2) merge and plot all RLum.Analysis objects</span></span></span>
<span class="r-in"><span><span class="va">merged</span> <span class="op">&lt;-</span> <span class="fu"><a href="merge_RLum.html">merge_RLum</a></span><span class="op">(</span><span class="va">ExampleData.portableOSL</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot_RLum.html">plot_RLum</a></span><span class="op">(</span></span></span>
<span class="r-in"><span> object <span class="op">=</span> <span class="va">merged</span>,</span></span>
<span class="r-in"><span> combine <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span> records_max <span class="op">=</span> <span class="fl">5</span>,</span></span>
<span class="r-in"><span> legend.pos <span class="op">=</span> <span class="st">"outside"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="analyse_portableOSL-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="va">merged</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [RLum.Analysis-class]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	 originator: merge_RLum.Analysis()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	 protocol: portable OSL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	 additional info elements:  196</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	 number of records: 70</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	 .. : RLum.Data.Curve : 70</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	 .. .. : #1 USER | #2 IRSL | #3 USER | #4 OSL | #5 USER | #6 USER | #7 IRSL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	 .. .. : #8 USER | #9 OSL | #10 USER | #11 USER | #12 IRSL | #13 USER | #14 OSL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	 .. .. : #15 USER | #16 USER | #17 IRSL | #18 USER | #19 OSL | #20 USER | #21 USER</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	 .. .. : #22 IRSL | #23 USER | #24 OSL | #25 USER | #26 USER | #27 IRSL | #28 USER</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	 .. .. : #29 OSL | #30 USER | #31 USER | #32 IRSL | #33 USER | #34 OSL | #35 USER</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	 .. .. : #36 USER | #37 IRSL | #38 USER | #39 OSL | #40 USER | #41 USER | #42 IRSL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	 .. .. : #43 USER | #44 OSL | #45 USER | #46 USER | #47 IRSL | #48 USER | #49 OSL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	 .. .. : #50 USER | #51 USER | #52 IRSL | #53 USER | #54 OSL | #55 USER | #56 USER</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	 .. .. : #57 IRSL | #58 USER | #59 OSL | #60 USER | #61 USER | #62 IRSL | #63 USER</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	 .. .. : #64 OSL | #65 USER | #66 USER | #67 IRSL | #68 USER | #69 OSL | #70 USER</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># (3) analyse and plot</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">analyse_portableOSL</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">merged</span>,</span></span>
<span class="r-in"><span>  signal.integral <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,</span></span>
<span class="r-in"><span>  invert <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  normalise <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="analyse_portableOSL-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu"><a href="get_RLum.html">get_RLum</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ID RUN        BSL    BSL_error       IRSL   IRSL_error BSL_depletion</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   1 ALU 0.66751034 0.0016178539 0.69677206 0.0035040643     0.8675537</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   2 ALU 1.33608934 0.0022884430 1.43034913 0.0050268167     0.8811300</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   3 ALU 0.35999022 0.0011869945 0.45413426 0.0028330832     1.1992200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   4 ALU 0.39980864 0.0012483733 0.42331051 0.0027004844     1.0490701</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   5 ALU 1.91016028 0.0027332907 1.93584455 0.0058476153     0.9097980</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   6 ALU 1.87047105 0.0027051257 1.83712738 0.0056976151     0.9659504</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   7 ALU 1.10402143 0.0020801568 0.95869456 0.0041114642     0.9922993</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   8 ALU 0.27824348 0.0010434799 0.39608610 0.0026434540     1.1796670</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   9 ALU 2.09649886 0.0028644330 2.08440551 0.0060688839     0.9090499</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 10 ALU 2.12595947 0.0028889095 2.17793540 0.0062025491     0.9572100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 11 ALU 1.63105170 0.0025284109 1.40432450 0.0049269556     0.8899796</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 12 ALU 0.10425127 0.0006390972 0.10266938 0.0013732741     1.1011572</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 13 ALU 0.08261577 0.0005690871 0.06579380 0.0010890682     1.0486319</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 14 ALU 0.03332815 0.0003606878 0.03255285 0.0007974928     1.0492829</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    IRSL_depletion IRSL_BSL_RATIO       DARK DARK_error COORD_X COORD_Y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       0.9158216      1.0438371  1.1111111   8.568500       0       1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       0.9087895      1.0705490 -0.8222222  12.384537       0       2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       1.0233685      1.2615183 -0.2444444   8.931954       0       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       1.0190504      1.0587828 -0.1555556   8.355607       0       4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       0.9352608      1.0134461 -7.5333333  39.122535       0       5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       0.9506562      0.9821737  0.5111111  14.822621       0       6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7       1.0143051      0.8683659 -2.8888889  11.954882       0       7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8       0.9835481      1.4235234  0.5333333   7.322444       0       8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9       0.9673997      0.9942316 -2.6444444  11.790126       0       9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10      0.9799674      1.0244482  1.4000000  12.498000       0      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11      1.0160485      0.8609933  0.2666667  11.993180       0      11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12      1.0718821      0.9848262 -6.4222222  38.856665       0      12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13      1.1398779      0.7963831  1.0222222   6.471929       0      13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14      1.0740241      0.9767372 -1.0666667   4.750120       0      14</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sebastian Kreutzer, Christoph Burow, Michael Dietze, Margret C. Fuchs, Christoph Schmidt, Manfred Fischer, Johannes Friedrich, Norbert Mercier, Anne Philippe, Svenja Riedesel, Martin Autzen, Dirk Mittelstrass, Harrison J. Gray, Jean-Michel Galharret, Marco Colombo, Luc Steinbuch, Anna-Maartje de Boer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

